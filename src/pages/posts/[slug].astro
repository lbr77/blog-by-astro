---
import LayoutDefault from "../../layouts/LayoutDefault.astro";
import {getEntry} from 'astro:content';
import PostLayout from "../../layouts/LayoutPost.astro";
import Layout404 from "../../layouts/Layout404.astro";
import {getAllPosts, getPostBySlug} from "../../utils/notion/posts";
const slug = Astro.params.slug;
const blog = await getPostBySlug(slug);

export async function getStaticPaths(){
    const response = await getAllPosts();
    return response.map((page)=>{
        return {
            params:{
                slug: `posts/${page.slug}`
            }
        }
    });
}
---
{blog ? <LayoutDefault title={blog.title}>
<PostLayout content={blog}/>
</LayoutDefault>:<LayoutDefault title={"找不到惹！"}> <Layout404/></LayoutDefault>}